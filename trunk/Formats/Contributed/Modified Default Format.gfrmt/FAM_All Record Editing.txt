!SJGR changed from default to adjust tabs for extra columns in child table
!also added buttons to copy/paste events

load FAMPanes,TagBlock,ResetTabs,ListBlock,References,AttachData

! ************** MAIN PANE ****************

DropTypes INDI,INDICtrl
GoSub ResetTabs,0
GoSub FAMPanes,"All"

! --------- Marriage --------------
newline
cell GroupBox local("MARR")
width -1

if @this._UMR=""
  Show MARR details
  ShowAll MARR details
else
  newline

  cell static,local("Unmarried Couple")
  SizeToFit

  hskip 10
  cell LinkButton,local("Change")
  set border shadowlesssquare
  MenuLink "Attach Married Status"
  Help local("Click to change to married couple")

  ShowAll MARR details
endif

EndGroup

! --------- Children --------------
cell GroupBox,local("Children")
width -1

newline
ClearTabs
#lineSkip=2
#cellSkip=2
#tableWidth=#rightMargin$-#rightSkip-#hpos$
!SetTab #habs$,#habs$+0.4*#tableWidth,#habs$+0.55*#tableWidth
!SetTab #habs$+0.85*#tableWidth,#habs$+#tableWidth

!Following two lines to replace two above to put baptism and death dates in family record  SJGR
SetTab #habs$,#habs$+0.33*#tableWidth,#habs$+0.45*#tableWidth
SetTab #habs$+0.6*#tableWidth,#habs$+0.75*#tableWidth,#habs$+0.9*#tableWidth,#habs$+#tableWidth

#chilNum=0ShowAll CHIL

#lineSkip=#lineSkip$
#cellSkip=#cellSkip$

newline -3
cell LinkButton
image "plus"
set width 24 border no
MenuLink "Attach Child"
help local("Click to attach new child")

cell LinkButton "-"
image "minus"
set width 24 border no
MenuLink "Detach Child"
help local("Click to detach child")

if NCHI is here
  show NCHI
  hide NCHI
endif

EndGroup
GoSub ResetTabs,0

! ************** EVENTS PANE **************

! --------- Events --------------
cell GroupBox,local("Events")
width -1

newline
ClearTabs
#lineSkip=2
#cellSkip=2
#tableWidth=#rightMargin$-#rightSkip-#hpos$-#cellSkip-48  !changed from 21 to account for extra space needed for 2 icons SJGR
#nameWidth=(#tableWidth-2*#cellSkip-20)/2
if #nameWidth>180
  #nameWidth=180
endif
  !Tabs Changed to account for place detail in main window SJGR
  !SetTab #habs$+#nameWidth,#habs$+#nameWidth+20,#habs$+#tableWidth
   SetTab #habs$+#nameWidth,#habs$+#nameWidth+20,#habs$+#nameWidth+222,#habs$+#tableWidth
#first="yes"

hide MARRShowAll FAMEvents
ShowAll FAMOrdinances

#lineSkip=#lineSkip$
#cellSkip=#cellSkip$

newline 3  !Changed from -3 to account for new Copy/Paste buttons SJGR
cell LinkButton
image "plus"
set width 24 border no
MenuLink "Attach Event/Attribute"
help local("Click to add an event")

cell LinkButton "-"
image "minus"
set width 24 border no
MenuLink "Detach Event/Attribute/Link"
help local("Click to remove an event")

!Add two buttons to Copy/Paste SJGR
hskip 2
cell linkbutton
set border shadowlesssquare height 18 Width 70
text "Copy Event"
ScriptType Format
ScriptLink "CopyEvent"

hskip 2
cell linkbutton
set border shadowlesssquare height 18 Width 70
text "Paste Event"
ScriptType Format
ScriptLink "PasteEvent"

EndGroup
GoSub ResetTabs,0

! ***************** MULTIMEDIA PANE *****************

! --------- OBJEs -----------
#objdone=""
Gosub TagBlock,"OBJE","Multimedia"

! ***************** NOTES AND SOURCES PANE *****************

! --------- NOTEs, SOURs, and _LOGs -----------
gosub References,"_LOG"

! ***************** ADDITIONAL DATA *****************

! --------- Attach links
newlinecell GroupBox,local("Attach")
width -1
newline -#lineSkip-3
#lineSkip=0
Show OBJE
Show NOTE
Show SOUR
Show _LOG
gosub AttachData
EndGroup
#lineSkip=#lineSkip$

! -------- Additional Data ------------
if more is true
  ClearTabs
  gosub ResetTabs,50
  cell GroupBox,local("Additional Data")
  width -1
  ShowAll CHAN
  ShowAll all
  EndGroup
endif

! -------- Export -------------

cell GroupBox,local("Export")
width -1
cell LinkButton ".ged"
set ScriptLink "Share Family Tree" ScriptType "system"
set border shadowlesssquare
sizetofit

optionalTag NCHI,local(NCHI),#chilNum
optionalTag RIN,local(RIN)
optionalTag REFN,local(REFN)
optionalTag SUBM,local(SUBM)
optionalTag,REFN,local("Keyword(s)"), ,"TYPE Keyword(s)"
